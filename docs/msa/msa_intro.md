# 마이크로서비스 아키텍처
- 하나의 큰 애플리케이션을 여러 개의 작은 애플리케이션으로 쪼개어 변경과 조합이 가능하도록 만든 아키텍처

## 마이크로서비스 아키텍처는 언제 필요한가?
- 애플리케이션의 배포에 한 시간 이상 소요된다.
- 단순한 기능 하나를 수정해도 전체 기능에 대한 QA 가 필요하다
- 단순한 버그 수정이 더 중대한 버그를 생산하는 일이 많아졌다.
- 현재의 애플리케이션을 기능별로 나눈다고 가정했을 때 수십개의 마이크로 서비스가 가능하다.

## 모놀로틱 아키텍처
- 배포 시간의 증가
- 부분적 스케일 아웃의 어려움
- 안정성의 감소
- 애플리케이션을 구성하는 프로그래밍 언어, 또는 프레임워크의 변경이 거의 불가능에 가까울 정도로 어렵다.

## 마이크로서비스 아키텍처
- 독립적인 역할을 수행하는 작은 단위의 서비스로 분리하여 설계하는 패턴

## 마이크로서비스 아키텍처의 장점
서비스의 규모가 커지고 복잡도가 증가할 수록 여러가지 장점을 갖는다
- 서비스가 개별적으로 독립적인 단위의 애플리케이션이기 때문에 변경이 용이하고 그 변경이 다른 서비스에 미치는 영향이 적다
- 하루에도 필요에 따라 여러번 배포를 하는 것이 가능하다
- 부하가 집중되는 특정 서비스를 위해 전체 애플리케이션을 스케일 아웃할 필요가 없어 불필요한 자원의 낭비를 줄일 수 있다.
- 서비스의 특성에 따라 효율적인 자원사용이 가능하다.
- 시스템의 아키텍처가 개발 조직과 나아가서 회사의 조직문화에 큰 영향을 미친다
- 조직의 의사결정 프로세스와 테스트 및 배포 프로세스 등 많은 부분에 영향을 미친다

## 마이크로서비스 아키텍처의 단점
- 서비스 간의 통신에 대한 처리가 추가적으로 필요하다.
- 데이터 정합성을 위한 노력이 추가적으로 필요하다.

# API Gateway
서비스로 전달되는 모든 API 요청의 관문 역할을 하는 서버다
- 로드 밸런서의 역할
- 동일한 요청에 대한 불필요한 반복작업을 줄일 수 있는 캐싱
- 시스템상을 오고가는 요청과 응답에 대한 모니터링
- 시스템 내부의 아키텍처를 숨길 수 있는 틋겅

## 단점
- 구현하고 관리해야 하는 요소가 하나 더 증가한다. 
- 성능상의 병목지점이 될 수 있다
- 비동기적이고 non-blocking I/O 처리가 가능하도록 구현하는 것이 적은 비용으로 최대의 성능을 발휘할 수 있는 관건

## API Gateway 구현시 고려해야 할 점들
- 개별 마이크로 서비스로 보내는 요청의 선후관계가 존재( Reactive 프로그래밍, 자바스크립트의 Promise, 스칼라의 Future )
- 예외에 대한 처리 ( 분산된 서버의 상태와 여러가지 변수들로 인해서 일부 서비스에 장애가 발생하거나 응답속도가 지연될 가능성이 높아지게 된다)
- 기존의 결과를 캐싱하여 재활용할 수 있도록 설계하는 것이 중요하다

# 참고
- [마이크로서비스 아키텍처. 그것이 뭣이 중헌디?](http://guruble.com/%eb%a7%88%ec%9d%b4%ed%81%ac%eb%a1%9c%ec%84%9c%eb%b9%84%ec%8a%a4microservice-%ec%95%84%ed%82%a4%ed%85%8d%ec%b2%98-%ea%b7%b8%ea%b2%83%ec%9d%b4-%eb%ad%a3%ec%9d%b4-%ec%a4%91%ed%97%8c%eb%94%94/)
- https://twofootdog.tistory.com/64
